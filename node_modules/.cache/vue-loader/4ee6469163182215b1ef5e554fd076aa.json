{"remainingRequest":"C:\\xampp\\htdocs\\poin_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\poin_front\\src\\views\\input_pelanggaran.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\poin_front\\src\\views\\input_pelanggaran.vue","mtime":1580884445267},{"path":"C:\\xampp\\htdocs\\poin_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\poin_front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\poin_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\poin_front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQptb2R1bGUuZXhwb3J0cyA9IHsNCiAgZGF0YSA6IGZ1bmN0aW9uKCl7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlYXJjaDogIiIsDQogICAgICBpZDogIiIsDQogICAgICBpZF9wZXR1Z2FzOiAiIiwNCiAgICAgIGlkX3Npc3dhOiAiIiwNCiAgICAgIGlkX3BlbGFuZ2dhcmFuOiAiIiwNCiAgICAgIGtldGVyYW5nYW46ICIiLA0KICAgICAgdGFuZ2dhbDogIiIsDQogICAgICBhY3Rpb246ICIiLA0KICAgICAgbWVzc2FnZTogIiIsDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHJvd3M6IDAsDQogICAgICBwZXJQYWdlOiAxMCwNCiAgICAgIGtleTogIiIsDQogICAgICBkYXRhX3BlbGFuZ2dhcmFuOiBbXSwNCiAgICAgIGZpZWxkczogWyJ0YW5nZ2FsIiwgIm5hbWFfc2lzd2EiLCAia2VsYXMiLCAia2F0ZWdvcmkiLCAibmFtYV9wZWxhbmdnYXJhbiIsICJwb2luIiwgIkFrc2kiXSwNCiAgICAgIG5hbWFfc2lzd2E6IFtdLA0KICAgICAgbmFtYV9wZWxhbmdnYXJhbjogW10NCiAgICB9DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGdldERhdGEgOiBmdW5jdGlvbigpew0KICAgICAgbGV0IGNvbmYgPSB7IGhlYWRlcnM6IHsgIkF1dGhvcml6YXRpb24iIDogJ0JlYXJlciAnICsgdGhpcy5rZXkgfSB9Ow0KICAgICAgbGV0IG9mZnNldCA9ICh0aGlzLmN1cnJlbnRQYWdlIC0gMSkgKiB0aGlzLnBlclBhZ2U7DQogICAgICB0aGlzLiRidlRvYXN0LnNob3coImxvYWRpbmdUb2FzdCIpOw0KICAgICAgdGhpcy5heGlvcy5nZXQoIi9wb2luLyIgKyB0aGlzLnBlclBhZ2UgKyAiLyIgKyBvZmZzZXQsIGNvbmYpDQogICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09IDEpew0KICAgICAgICAgIHRoaXMuJGJ2VG9hc3QuaGlkZSgibG9hZGluZ1RvYXN0Iik7DQogICAgICAgICAgdGhpcy5kYXRhX3BlbGFuZ2dhcmFuID0gcmVzcG9uc2UuZGF0YS5wb2luOw0KICAgICAgICAgIHRoaXMucm93cyA9IHJlc3BvbnNlLmRhdGEuY291bnQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kYnZUb2FzdC5oaWRlKCJsb2FkaW5nVG9hc3QiKTsNCiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiR2FnYWwgbWVuYW1waWxrYW4gZGF0YSBwb2luIHBlbGFuZ2dhcmFuIHNlbXVhIHNpc3dhLiINCiAgICAgICAgICB0aGlzLiRidlRvYXN0LnNob3coIm1lc3NhZ2UiKTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogImxvZ2luIn0pDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICB9KQ0KICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIGdldFNpc3dhRHJvcGRvd246IGZ1bmN0aW9uKCl7DQogICAgICAgIC8vYW1iaWwgZGF0YSBzaXN3YSB1bnR1ayBkcm9wZG93bg0KICAgICAgICBsZXQgY29uZiA9IHsgaGVhZGVyczogeyAiQXV0aG9yaXphdGlvbiIgOiAnQmVhcmVyICcgKyB0aGlzLmtleSB9IH07DQogICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvc2lzd2EiLCBjb25mKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICBsZXQganNvbl9zaXN3YSA9IHJlc3BvbnNlLmRhdGEuc2lzd2E7DQogICAgICAgICAgICBsZXQgbGlzdF9zaXN3YSA9IFtdDQogICAgICAgICAgICBqc29uX3Npc3dhLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgbGlzdF9zaXN3YS5wdXNoKHt2YWx1ZTogZWxlbWVudC5pZCwgdGV4dDogZWxlbWVudC5uYW1hX3Npc3dhfSkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5uYW1hX3Npc3dhID0gbGlzdF9zaXN3YQ0KICAgICAgICB9KQ0KICAgIH0sDQoNCiAgICBnZXRQZWxhbmdnYXJhbkRyb3Bkb3duOiBmdW5jdGlvbigpew0KICAgICAgICAvL2FtYmlsIGRhdGEgcGVsYW5nZ2FyYW4gdW50dWsgZHJvcGRvd24NCiAgICAgICAgbGV0IGNvbmYgPSB7IGhlYWRlcnM6IHsgIkF1dGhvcml6YXRpb24iIDogJ0JlYXJlciAnICsgdGhpcy5rZXkgfSB9Ow0KICAgICAgICB0aGlzLmF4aW9zLmdldCgiL3BlbGFuZ2dhcmFuIiwgY29uZikNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgbGV0IGpzb25fcGVsYW5nZ2FyYW4gPSByZXNwb25zZS5kYXRhLnBlbGFuZ2dhcmFuOw0KICAgICAgICAgICAgbGV0IGxpc3RfcGVsYW5nZ2FyYW4gPSBbXQ0KICAgICAgICAgICAganNvbl9wZWxhbmdnYXJhbi5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICAgICAgICAgIGxpc3RfcGVsYW5nZ2FyYW4ucHVzaCh7dmFsdWU6IGVsZW1lbnQuaWQsIHRleHQ6IGVsZW1lbnQubmFtYV9wZWxhbmdnYXJhbn0pDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMubmFtYV9wZWxhbmdnYXJhbiA9IGxpc3RfcGVsYW5nZ2FyYW4NCiAgICAgICAgfSkNCiAgICB9LA0KDQogICAgcGFnaW5hdGlvbiA6IGZ1bmN0aW9uKCl7DQogICAgICBpZih0aGlzLnNlYXJjaCA9PSAiIil7DQogICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZWFyY2hpbmcoKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgQWRkIDogZnVuY3Rpb24oKXsNCiAgICAgIHRoaXMuYWN0aW9uID0gImluc2VydCINCiAgICAgIHRoaXMuaWQgPSAiIg0KICAgICAgdGhpcy5pZF9wZXR1Z2FzID0gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyRGV0YWlsLmlkDQogICAgICB0aGlzLmlkX3Npc3dhID0gIiINCiAgICAgIHRoaXMuaWRfcGVsYW5nZ2FyYW4gPSAiIg0KICAgICAgdGhpcy5rZXRlcmFuZ2FuID0gIiINCiAgICAgIHRoaXMudGFuZ2dhbCA9ICIiDQogICAgICB0aGlzLmdldFNpc3dhRHJvcGRvd24oKQ0KICAgICAgdGhpcy5nZXRQZWxhbmdnYXJhbkRyb3Bkb3duKCkNCiAgICB9LA0KDQogICAgRWRpdCA6IGZ1bmN0aW9uKGl0ZW0pew0KICAgICAgdGhpcy5nZXRTaXN3YURyb3Bkb3duKCkNCiAgICAgIHRoaXMuZ2V0UGVsYW5nZ2FyYW5Ecm9wZG93bigpDQogICAgICB0aGlzLmFjdGlvbiA9ICJ1cGRhdGUiOw0KICAgICAgdGhpcy5pZCA9IGl0ZW0uaWQNCiAgICAgIHRoaXMuaWRfcGV0dWdhcyA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckRldGFpbC5pZA0KICAgICAgdGhpcy5pZF9zaXN3YSA9IGl0ZW0uaWRfc2lzd2E7DQogICAgICB0aGlzLmlkX3BlbGFuZ2dhcmFuID0gaXRlbS5pZF9wZWxhbmdnYXJhbjsNCiAgICAgIHRoaXMua2V0ZXJhbmdhbiA9IGl0ZW0ua2V0ZXJhbmdhbjsNCiAgICAgIHRoaXMudGFuZ2dhbCA9IGl0ZW0udGFuZ2dhbA0KICAgIH0sDQoNCiAgICBTYXZlIDogZnVuY3Rpb24oKXsNCiAgICAgIGxldCBjb25mID0geyBoZWFkZXJzOiB7ICJBdXRob3JpemF0aW9uIiA6ICdCZWFyZXIgJyArIHRoaXMua2V5IH0gfTsNCiAgICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibG9hZGluZ1RvYXN0Iik7DQoNCiAgICAgIGlmKHRoaXMuYWN0aW9uID09PSAiaW5zZXJ0Iil7DQogICAgICAgIGxldCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgIC8vZ2V0IGlkIHBldHVnYXMNCiAgICAgICAgdGhpcy5heGlvcy5nZXQoIi9sb2dpbi9jaGVjayIsIGNvbmYpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmF1dGggPT0gZmFsc2UgfHwgcmVzcG9uc2UuZGF0YS5zdGF0dXMgPT0gMCl7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2xvZ291dCcpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KDQogICAgICAgIGZvcm0uYXBwZW5kKCJpZF9wZXR1Z2FzIiwgdGhpcy5pZF9wZXR1Z2FzKTsNCiAgICAgICAgZm9ybS5hcHBlbmQoImlkX3Npc3dhIiwgdGhpcy5pZF9zaXN3YSk7DQogICAgICAgIGZvcm0uYXBwZW5kKCJpZF9wZWxhbmdnYXJhbiIsIHRoaXMuaWRfcGVsYW5nZ2FyYW4pOw0KICAgICAgICBmb3JtLmFwcGVuZCgia2V0ZXJhbmdhbiIsIHRoaXMua2V0ZXJhbmdhbik7DQogICAgICAgIGZvcm0uYXBwZW5kKCJ0YW5nZ2FsIiwgdGhpcy50YW5nZ2FsKTsNCiAgICAgICAgdGhpcy5heGlvcy5wb3N0KCIvcG9pbiIsIGZvcm0sIGNvbmYpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRidlRvYXN0LmhpZGUoImxvYWRpbmdUb2FzdCIpOw0KICAgICAgICAgIGlmKHRoaXMuc2VhcmNoID09ICIiKXsNCiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnNlYXJjaGluZygpOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7DQogICAgICAgICAgdGhpcy4kYnZUb2FzdC5zaG93KCJtZXNzYWdlIik7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBmb3JtID0gew0KICAgICAgICAgIGlkX3BldHVnYXM6IHRoaXMuaWRfcGV0dWdhcywNCiAgICAgICAgICBpZF9wZWxhbmdnYXJhbjogdGhpcy5pZF9wZWxhbmdnYXJhbiwNCiAgICAgICAgICBpZF9zaXN3YTogdGhpcy5pZF9zaXN3YSwNCiAgICAgICAgICBrZXRlcmFuZ2FuOiB0aGlzLmtldGVyYW5nYW4sDQogICAgICAgICAgdGFuZ2dhbDogdGhpcy50YW5nZ2FsDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5heGlvcy5wdXQoIi9wb2luLyIgKyB0aGlzLmlkLCBmb3JtLCBjb25mKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy4kYnZUb2FzdC5oaWRlKCJsb2FkaW5nVG9hc3QiKTsNCiAgICAgICAgICBpZih0aGlzLnNlYXJjaCA9PSAiIil7DQogICAgICAgICAgICB0aGlzLmdldERhdGEoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5zZWFyY2hpbmcoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5tZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOw0KICAgICAgICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibWVzc2FnZSIpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCg0KICAgIERyb3AgOiBmdW5jdGlvbihpZCl7DQogICAgICBsZXQgY29uZiA9IHsgaGVhZGVyczogeyAiQXV0aG9yaXphdGlvbiIgOiAiQmVhcmVyICIgKyB0aGlzLmtleX0gfTsNCiAgICAgIGlmKGNvbmZpcm0oJ0FwYWthaCBhbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBkYXRhIGluaT8nKSl7DQogICAgICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibG9hZGluZ1RvYXN0Iik7DQogICAgICAgIHRoaXMuYXhpb3MuZGVsZXRlKCIvcG9pbi8iICsgaWQsIGNvbmYpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICAgICAgdGhpcy4kYnZUb2FzdC5oaWRlKCJsb2FkaW5nVG9hc3QiKTsNCiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZTsNCiAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibWVzc2FnZSIpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpew0KICAgIHRoaXMua2V5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIkF1dGhvcml6YXRpb24iKTsNCiAgICB0aGlzLmdldERhdGEoKTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["input_pelanggaran.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"input_pelanggaran.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container mt-3\">\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-12 grid-margin stretch-card\">\r\n          <div class=\"card\">\r\n            <div class=\"card-body\">\r\n              <p class=\"card-title float-left\"><b>Data Input Pelanggaran Tatib</b></p>\r\n              <p class=\"card-description float-right\">\r\n                <b-button variant=\"success\" v-b-modal.modalTatib v-on:click=\"Add\"><i class=\"mdi mdi-plus btn-icon-prepend\"></i> Tambah</b-button>\r\n              </p>\r\n              <div class=\"table-responsive\">\r\n\r\n                <b-table striped hover :items=\"data_pelanggaran\" :fields=\"fields\">\r\n                  <template v-slot:cell(poin)=\"data\">\r\n                    <h5><b-badge variant=\"warning\">{{ data.item.poin }}</b-badge></h5>\r\n                  </template>\r\n                  <template v-slot:cell(Aksi)=\"data\">\r\n                    <b-button size=\"sm\" variant=\"info\" v-on:click=\"Edit(data.item)\" v-b-modal.modalTatib><i class=\"mdi mdi-pencil btn-icon-prepend\"></i> Ubah</b-button>&nbsp;\r\n                    <b-button size=\"sm\" variant=\"danger\" v-on:click=\"Drop(data.item.id)\"><i class=\"mdi mdi-delete btn-icon-prepend\"></i> Hapus</b-button>\r\n                  </template>\r\n                </b-table>\r\n                <b-pagination\r\n                  v-model=\"currentPage\"\r\n                  :per-page=\"perPage\"\r\n                  :total-rows=\"rows\"\r\n                  align=\"center\"\r\n                  v-on:input=\"pagination\">\r\n                </b-pagination>\r\n\r\n                <b-toast id=\"loadingToast\" title=\"Processing Data\" no-auto-hide>\r\n                  <b-spinner label=\"Spinning\" variant=\"success\"></b-spinner>\r\n                  <strong class=\"text-success\">Loading...</strong>\r\n                </b-toast>\r\n\r\n                <!-- toast untuk tampilan message box -->\r\n                <b-toast id=\"message\" title=\"Message\">\r\n                  <strong class=\"text-success\">{{ message }}</strong>\r\n                </b-toast>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <b-modal \r\n      id=\"modalTatib\"\r\n      @ok=\"Save\"\r\n    >\r\n      <template v-slot:modal-title>\r\n        Form Input Pelanggaran\r\n      </template>\r\n        <form ref=\"form\">\r\n          <div class=\"form-group\">\r\n              <label for=\"tanggal\" class=\"col-form-label\">Tgl.Melanggar</label>\r\n              <b-form-input type=\"date\" v-model=\"tanggal\"></b-form-input>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"nama_siswa\" class=\"col-form-label\">Nama Siswa</label>\r\n            <b-form-select id=\"id_siswa\" v-model=\"id_siswa\" :options=\"nama_siswa\"></b-form-select>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"id_pelanggaran\" class=\"col-form-label\">Pelanggaran</label>\r\n            <b-form-select id=\"id_pelanggaran\" v-model=\"id_pelanggaran\" :options=\"nama_pelanggaran\"></b-form-select>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"keterangan\" class=\"col-form-label\">Keterangan</label>\r\n            <b-form-input type=\"text\" v-model=\"keterangan\" placeholder=\"Keterangan\"></b-form-input>\r\n          </div>\r\n        </form>\r\n    </b-modal>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nmodule.exports = {\r\n  data : function(){\r\n    return {\r\n      search: \"\",\r\n      id: \"\",\r\n      id_petugas: \"\",\r\n      id_siswa: \"\",\r\n      id_pelanggaran: \"\",\r\n      keterangan: \"\",\r\n      tanggal: \"\",\r\n      action: \"\",\r\n      message: \"\",\r\n      currentPage: 1,\r\n      rows: 0,\r\n      perPage: 10,\r\n      key: \"\",\r\n      data_pelanggaran: [],\r\n      fields: [\"tanggal\", \"nama_siswa\", \"kelas\", \"kategori\", \"nama_pelanggaran\", \"poin\", \"Aksi\"],\r\n      nama_siswa: [],\r\n      nama_pelanggaran: []\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getData : function(){\r\n      let conf = { headers: { \"Authorization\" : 'Bearer ' + this.key } };\r\n      let offset = (this.currentPage - 1) * this.perPage;\r\n      this.$bvToast.show(\"loadingToast\");\r\n      this.axios.get(\"/poin/\" + this.perPage + \"/\" + offset, conf)\r\n      .then(response => {\r\n        if(response.data.status == 1){\r\n          this.$bvToast.hide(\"loadingToast\");\r\n          this.data_pelanggaran = response.data.poin;\r\n          this.rows = response.data.count;\r\n        } else {\r\n          this.$bvToast.hide(\"loadingToast\");\r\n          this.message = \"Gagal menampilkan data poin pelanggaran semua siswa.\"\r\n          this.$bvToast.show(\"message\");\r\n          this.$router.push({name: \"login\"})\r\n        }\r\n        \r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n    },\r\n\r\n    getSiswaDropdown: function(){\r\n        //ambil data siswa untuk dropdown\r\n        let conf = { headers: { \"Authorization\" : 'Bearer ' + this.key } };\r\n        this.axios.get(\"/siswa\", conf)\r\n        .then(response => {\r\n            let json_siswa = response.data.siswa;\r\n            let list_siswa = []\r\n            json_siswa.forEach(element => {\r\n                list_siswa.push({value: element.id, text: element.nama_siswa})\r\n            });\r\n            this.nama_siswa = list_siswa\r\n        })\r\n    },\r\n\r\n    getPelanggaranDropdown: function(){\r\n        //ambil data pelanggaran untuk dropdown\r\n        let conf = { headers: { \"Authorization\" : 'Bearer ' + this.key } };\r\n        this.axios.get(\"/pelanggaran\", conf)\r\n        .then(response => {\r\n            let json_pelanggaran = response.data.pelanggaran;\r\n            let list_pelanggaran = []\r\n            json_pelanggaran.forEach(element => {\r\n                list_pelanggaran.push({value: element.id, text: element.nama_pelanggaran})\r\n            });\r\n            this.nama_pelanggaran = list_pelanggaran\r\n        })\r\n    },\r\n\r\n    pagination : function(){\r\n      if(this.search == \"\"){\r\n        this.getData();\r\n      } else {\r\n        this.searching();\r\n      }\r\n    },\r\n\r\n    Add : function(){\r\n      this.action = \"insert\"\r\n      this.id = \"\"\r\n      this.id_petugas = this.$store.getters.userDetail.id\r\n      this.id_siswa = \"\"\r\n      this.id_pelanggaran = \"\"\r\n      this.keterangan = \"\"\r\n      this.tanggal = \"\"\r\n      this.getSiswaDropdown()\r\n      this.getPelanggaranDropdown()\r\n    },\r\n\r\n    Edit : function(item){\r\n      this.getSiswaDropdown()\r\n      this.getPelanggaranDropdown()\r\n      this.action = \"update\";\r\n      this.id = item.id\r\n      this.id_petugas = this.$store.getters.userDetail.id\r\n      this.id_siswa = item.id_siswa;\r\n      this.id_pelanggaran = item.id_pelanggaran;\r\n      this.keterangan = item.keterangan;\r\n      this.tanggal = item.tanggal\r\n    },\r\n\r\n    Save : function(){\r\n      let conf = { headers: { \"Authorization\" : 'Bearer ' + this.key } };\r\n      this.$bvToast.show(\"loadingToast\");\r\n\r\n      if(this.action === \"insert\"){\r\n        let form = new FormData();\r\n        //get id petugas\r\n        this.axios.get(\"/login/check\", conf)\r\n        .then(response => {\r\n          if(response.data.auth == false || response.data.status == 0){\r\n            this.$store.commit('logout')\r\n          }\r\n        })\r\n\r\n        form.append(\"id_petugas\", this.id_petugas);\r\n        form.append(\"id_siswa\", this.id_siswa);\r\n        form.append(\"id_pelanggaran\", this.id_pelanggaran);\r\n        form.append(\"keterangan\", this.keterangan);\r\n        form.append(\"tanggal\", this.tanggal);\r\n        this.axios.post(\"/poin\", form, conf)\r\n        .then(response => {\r\n          this.$bvToast.hide(\"loadingToast\");\r\n          if(this.search == \"\"){\r\n            this.getData();\r\n          } else {\r\n            this.searching();\r\n          }\r\n          this.message = response.data.message;\r\n          this.$bvToast.show(\"message\");\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n      } else {\r\n        let form = {\r\n          id_petugas: this.id_petugas,\r\n          id_pelanggaran: this.id_pelanggaran,\r\n          id_siswa: this.id_siswa,\r\n          keterangan: this.keterangan,\r\n          tanggal: this.tanggal\r\n        }\r\n        this.axios.put(\"/poin/\" + this.id, form, conf)\r\n        .then(response => {\r\n          this.$bvToast.hide(\"loadingToast\");\r\n          if(this.search == \"\"){\r\n            this.getData();\r\n          } else {\r\n            this.searching();\r\n          }\r\n          this.message = response.data.message;\r\n          this.$bvToast.show(\"message\");\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n      }\r\n    },\r\n\r\n    Drop : function(id){\r\n      let conf = { headers: { \"Authorization\" : \"Bearer \" + this.key} };\r\n      if(confirm('Apakah anda yakin ingin menghapus data ini?')){\r\n        this.$bvToast.show(\"loadingToast\");\r\n        this.axios.delete(\"/poin/\" + id, conf)\r\n        .then(response => {\r\n            this.getData();\r\n            this.$bvToast.hide(\"loadingToast\");\r\n            this.message = response.data.message;\r\n            this.$bvToast.show(\"message\");\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n      }\r\n    },\r\n  },\r\n  mounted(){\r\n    this.key = localStorage.getItem(\"Authorization\");\r\n    this.getData();\r\n  }\r\n}\r\n</script>"]}]}